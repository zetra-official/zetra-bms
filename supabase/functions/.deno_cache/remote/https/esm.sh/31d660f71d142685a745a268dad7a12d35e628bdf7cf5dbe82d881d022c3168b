/* esm.sh - @supabase/postgrest-js@2.97.0 */
var O=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},j=class{constructor(e){var t,s,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(s=e.isMaybeSingle)!==null&&s!==void 0?s:!1,this.urlLengthLimit=(r=e.urlLengthLimit)!==null&&r!==void 0?r:8e3,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var s=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");let r=this.fetch,h=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let a=null,n=null,u=null,o=i.status,l=i.statusText;if(i.ok){var d,p;if(s.method!=="HEAD"){var c;let v=await i.text();v===""||(s.headers.get("Accept")==="text/csv"||s.headers.get("Accept")&&(!((c=s.headers.get("Accept"))===null||c===void 0)&&c.includes("application/vnd.pgrst.plan+text"))?n=v:n=JSON.parse(v))}let m=(d=s.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),g=(p=i.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");m&&g&&g.length>1&&(u=parseInt(g[1])),s.isMaybeSingle&&s.method==="GET"&&Array.isArray(n)&&(n.length>1?(a={code:"PGRST116",details:`Results contain ${n.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},n=null,u=null,o=406,l="Not Acceptable"):n.length===1?n=n[0]:n=null)}else{var f;let m=await i.text();try{a=JSON.parse(m),Array.isArray(a)&&i.status===404&&(n=[],a=null,o=200,l="OK")}catch{i.status===404&&m===""?(o=204,l="No Content"):a={message:m}}if(a&&s.isMaybeSingle&&(!(a==null||(f=a.details)===null||f===void 0)&&f.includes("0 rows"))&&(a=null,o=200,l="OK"),a&&s.shouldThrowOnError)throw new O(a)}return{error:a,data:n,count:u,status:o,statusText:l}});return this.shouldThrowOnError||(h=h.catch(i=>{var a;let n="",u="",o="",l=i?.cause;if(l){var d,p,c,f;let v=(d=l?.message)!==null&&d!==void 0?d:"",w=(p=l?.code)!==null&&p!==void 0?p:"";n=`${(c=i?.name)!==null&&c!==void 0?c:"FetchError"}: ${i?.message}`,n+=`

Caused by: ${(f=l?.name)!==null&&f!==void 0?f:"Error"}: ${v}`,w&&(n+=` (${w})`),l?.stack&&(n+=`
${l.stack}`)}else{var m;n=(m=i?.stack)!==null&&m!==void 0?m:""}let g=this.url.toString().length;return i?.name==="AbortError"||i?.code==="ABORT_ERR"?(o="",u="Request was aborted (timeout or manual cancellation)",g>this.urlLengthLimit&&(u+=`. Note: Your request URL is ${g} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):(l?.name==="HeadersOverflowError"||l?.code==="UND_ERR_HEADERS_OVERFLOW")&&(o="",u="HTTP headers exceeded server limits (typically 16KB)",g>this.urlLengthLimit&&(u+=`. Your request URL is ${g} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(a=i?.name)!==null&&a!==void 0?a:"FetchError"}: ${i?.message}`,details:n,hint:u,code:o},data:null,count:null,status:0,statusText:""}})),h.then(e,t)}returns(){return this}overrideTypes(){return this}},A=class extends j{select(e){let t=!1,s=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:r,referencedTable:h=r}={}){let i=h?`${h}.order`:"order",a=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){let r=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:r=s}={}){let h=typeof r>"u"?"offset":`${r}.offset`,i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(h,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:r=!1,wal:h=!1,format:i="text"}={}){var a;let n=[e?"analyze":null,t?"verbose":null,s?"settings":null,r?"buffers":null,h?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${u}"; options=${n};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}},$=new RegExp("[,()]"),y=class extends A{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){let s=Array.from(new Set(t)).map(r=>typeof r=="string"&&$.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}notIn(e,t){let s=Array.from(new Set(t)).map(r=>typeof r=="string"&&$.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`not.in.(${s})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:r}={}){let h="";r==="plain"?h="pl":r==="phrase"?h="ph":r==="websearch"&&(h="w");let i=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${h}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,s])=>{this.url.searchParams.append(t,`eq.${s}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){let r=s?`${s}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}},S=class{constructor(e,{headers:t={},schema:s,fetch:r,urlLengthLimit:h=8e3}){this.url=e,this.headers=new Headers(t),this.schema=s,this.fetch=r,this.urlLengthLimit=h}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){let{head:s=!1,count:r}=t??{},h=s?"HEAD":"GET",i=!1,a=(e??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join(""),{url:n,headers:u}=this.cloneRequestState();return n.searchParams.set("select",a),r&&u.append("Prefer",`count=${r}`),new y({method:h,url:n,headers:u,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(e,{count:t,defaultToNull:s=!0}={}){var r;let h="POST",{url:i,headers:a}=this.cloneRequestState();if(t&&a.append("Prefer",`count=${t}`),s||a.append("Prefer","missing=default"),Array.isArray(e)){let n=e.reduce((u,o)=>u.concat(Object.keys(o)),[]);if(n.length>0){let u=[...new Set(n)].map(o=>`"${o}"`);i.searchParams.set("columns",u.join(","))}}return new y({method:h,url:i,headers:a,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:r,defaultToNull:h=!0}={}){var i;let a="POST",{url:n,headers:u}=this.cloneRequestState();if(u.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),t!==void 0&&n.searchParams.set("on_conflict",t),r&&u.append("Prefer",`count=${r}`),h||u.append("Prefer","missing=default"),Array.isArray(e)){let o=e.reduce((l,d)=>l.concat(Object.keys(d)),[]);if(o.length>0){let l=[...new Set(o)].map(d=>`"${d}"`);n.searchParams.set("columns",l.join(","))}}return new y({method:a,url:n,headers:u,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch,urlLengthLimit:this.urlLengthLimit})}update(e,{count:t}={}){var s;let r="PATCH",{url:h,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new y({method:r,url:h,headers:i,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:e}={}){var t;let s="DELETE",{url:r,headers:h}=this.cloneRequestState();return e&&h.append("Prefer",`count=${e}`),new y({method:s,url:r,headers:h,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch,urlLengthLimit:this.urlLengthLimit})}};function P(e){"@babel/helpers - typeof";return P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(e)}function R(e,t){if(P(e)!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var r=s.call(e,t||"default");if(P(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function x(e){var t=R(e,"string");return P(t)=="symbol"?t:t+""}function k(e,t,s){return(t=x(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function L(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),s.push.apply(s,r)}return s}function b(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?L(Object(s),!0).forEach(function(r){k(e,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):L(Object(s)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(s,r))})}return e}var q=class T{constructor(t,{headers:s={},schema:r,fetch:h,timeout:i,urlLengthLimit:a=8e3}={}){this.url=t,this.headers=new Headers(s),this.schemaName=r,this.urlLengthLimit=a;let n=h??globalThis.fetch;i!==void 0&&i>0?this.fetch=(u,o)=>{let l=new AbortController,d=setTimeout(()=>l.abort(),i),p=o?.signal;if(p){if(p.aborted)return clearTimeout(d),n(u,o);let c=()=>{clearTimeout(d),l.abort()};return p.addEventListener("abort",c,{once:!0}),n(u,b(b({},o),{},{signal:l.signal})).finally(()=>{clearTimeout(d),p.removeEventListener("abort",c)})}return n(u,b(b({},o),{},{signal:l.signal})).finally(()=>clearTimeout(d))}:this.fetch=n}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new S(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(t){return new T(this.url,{headers:this.headers,schema:t,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(t,s={},{head:r=!1,get:h=!1,count:i}={}){var a;let n,u=new URL(`${this.url}/rpc/${t}`),o,l=c=>c!==null&&typeof c=="object"&&(!Array.isArray(c)||c.some(l)),d=r&&Object.values(s).some(l);d?(n="POST",o=s):r||h?(n=r?"HEAD":"GET",Object.entries(s).filter(([c,f])=>f!==void 0).map(([c,f])=>[c,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([c,f])=>{u.searchParams.append(c,f)})):(n="POST",o=s);let p=new Headers(this.headers);return d?p.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&p.set("Prefer",`count=${i}`),new y({method:n,url:u,headers:p,schema:this.schemaName,body:o,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch,urlLengthLimit:this.urlLengthLimit})}},H={PostgrestClient:q,PostgrestQueryBuilder:S,PostgrestFilterBuilder:y,PostgrestTransformBuilder:A,PostgrestBuilder:j,PostgrestError:O};export{j as PostgrestBuilder,q as PostgrestClient,O as PostgrestError,y as PostgrestFilterBuilder,S as PostgrestQueryBuilder,A as PostgrestTransformBuilder,H as default};
//# sourceMappingURL=postgrest-js.mjs.map
// denoCacheMetadata={"headers":{"date":"Thu, 19 Feb 2026 19:58:57 GMT","cache-control":"public, max-age=31536000, immutable","age":"107344","cf-cache-status":"HIT","access-control-allow-origin":"*","last-modified":"Wed, 18 Feb 2026 14:09:51 GMT","content-type":"application/javascript; charset=utf-8","server":"cloudflare","vary":"Accept-Encoding","cf-ray":"9d085786d9b01636-JNB"},"url":"https://esm.sh/@supabase/postgrest-js@2.97.0/denonext/postgrest-js.mjs","time":1771531138}